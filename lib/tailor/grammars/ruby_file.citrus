grammar RubyFile
	include RubyString

	rule file
		lines {
			def strings
				find(:string)
			end

			def style_errors
				errors = []

				strings.each do |s|
					error = {}
					error[:line] = 1
					error[:problem_text] = s.style_errors

					errors << error
				end

				errors
			end
		}
	end

	rule lines
		line* {
			def line_count
				count = 1
				count += 1 if line
			end
		}
	end

	rule line
		(string | .) &[\n]?
	end
end
